CC=gcc
FLAGS=-std=c89 -pedantic -Wall -Werror -D_GNU_SOURCE -g
RM=rm -fv
.PHONY: all clean
.SECONDARY: pipe-message.o pipe-common.o
all: pipe-main.out
%.o: %.c %.h
	$(CC) $(FLAGS) -c -o $@ $<
%.out: %.c pipe-common.o pipe-message.o
	$(CC) $(FLAGS) -o $@ $^
msq-common.o: pipe-common.c pipe-common.h pipe-message.h
	$(CC) $(FLAGS) -c -o $@ $<
clean:
	$(RM) *.o *.out
